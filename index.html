<!DOCTYPE html>
<html lang='de'><head>
<meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1, viewport-fit=cover'>
<link rel='manifest' href='manifest.json'><meta name='apple-mobile-web-app-capable' content='yes'><meta name='apple-mobile-web-app-status-bar-style' content='black-translucent'>
<link rel='apple-touch-icon' href='icon-192.png'><meta name='theme-color' content='#0a2040'>
<title>Fluffy Wingz — Angel Chill</title>
<style>*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}html,body{height:100%;margin:0}
body{background:#071228;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden}
#wrap{position:relative;width:100%;max-width:860px;height:100vh;max-height:640px}canvas{width:100%;height:100%;display:block;background:#0a1a33}
.screen{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:22px;text-align:center}.hidden{display:none}
#intro{background:radial-gradient(1200px 700px at 50% 120%, #0a2040 0%, #08162a 70%, #040a17 100%)}.brand{font-weight:900;font-size:1.8em;letter-spacing:.02em;color:#ffe6a6;text-shadow:0 0 8px rgba(255,230,166,.9),0 0 22px rgba(240,200,120,.55)}
#menu{background:rgba(0,0,0,.82)}#menu img{max-width:82%;border-radius:12px;box-shadow:0 14px 42px rgba(0,0,0,.55)}.row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:14px}
button{background:linear-gradient(135deg,#ffd86b,#ffb44b);border:none;color:#212;font-weight:900;border-radius:40px;padding:12px 22px;cursor:pointer;box-shadow:0 10px 26px rgba(255,200,80,.35)}
button.ghost{background:rgba(255,255,255,.08);color:#fff;border:2px solid rgba(255,255,255,.35)}
#hudL,#hudR{position:absolute;top:8px;display:flex;gap:10px;align-items:center;padding:8px 12px;border-radius:14px;background:rgba(0,0,0,.28);backdrop-filter:blur(3px)}#hudL{left:10px}#hudR{right:10px}
.eggIcon{width:18px;height:24px;border-radius:50% 50% 45% 45%;background:radial-gradient(ellipse at 50% 35%,#FFE57F 0%,#FFD700 35%,#CCAC00 100%);box-shadow:inset 0 -2px 6px rgba(0,0,0,.25),0 0 6px rgba(255,215,0,.7)}
#over{background:rgba(6,10,22,.94)}</style></head><body>
<div id='wrap'>
  <div id='intro' class='screen'><div class='brand'>✨ Fantasy Fox präsentiert … Fluffy Wingz (Angel Chill) ✨</div></div>
  <div id='menu' class='screen hidden'>
    <img src='logo.png' alt='Fluffy Wingz'>
    <div class='row' style='margin-top:16px'>
      <button onclick="pick('easy')">EASY</button><button onclick="pick('normal')">NORMAL</button><button onclick="pick('hard')">HARD</button><button onclick="pick('insane')">INSANE</button><button class='ghost' onclick="pick('progress')">PROGRESSION</button>
    </div>
    <div style='opacity:.9;margin-top:8px'>Tippen/Klicken/Leertaste = Flügelschlag · Sammle goldene Eier (+5)</div>
  </div>
  <div id='hudL' class='hidden'>Score <b id='score'>0</b></div>
  <div id='hudR' class='hidden'><div class='eggIcon'></div><b id='eggs'>0</b></div>
  <div id='over' class='screen hidden'>
    <div style='font-size:2.1em;font-weight:900;margin-bottom:8px;'>GAME OVER</div>
    <div id='final' style='margin-bottom:6px'>Score: 0</div>
    <div id='eggSummary' style='margin-bottom:6px'>Eier: 0</div>
    <div id='best' style='opacity:.9'>Bester Score: 0</div>
    <div class='row' style='margin-top:12px'><button onclick='restart()'>NOCHMAL</button><button class='ghost' onclick='back()'>MENÜ</button></div>
  </div>
  <canvas id='c'></canvas>
</div>
<script>
if('serviceWorker' in navigator){ addEventListener('load',()=>navigator.serviceWorker.register('./service-worker.js')); }
const LEVELS={easy:{speed:2.6,gap:175,pipeEvery:95,eggEvery:190,gravity:0.44,theme:'harpCloud'},normal:{speed:3.0,gap:155,pipeEvery:86,eggEvery:175,gravity:0.50,theme:'crystalSky'},hard:{speed:3.6,gap:138,pipeEvery:78,eggEvery:162,gravity:0.52,theme:'angelRise'},insane:{speed:4.3,gap:122,pipeEvery:70,eggEvery:148,gravity:0.55,theme:'heavenFlight'},progress:{speed:2.8,gap:165,pipeEvery:90,eggEvery:180,gravity:0.50,theme:'finalGlow'}};
const cv=document.getElementById('c'),ctx=cv.getContext('2d'); cv.width=440; cv.height=640;
let CFG=LEVELS.normal; let game={state:'intro',score:0,eggs:0,best:parseInt(localStorage.getItem('fw_best')||'0'),frame:0,level:'normal',step:0};
const bird={x:110,y:300,vy:0,size:28,rot:0}; let pipes=[],eggs=[],sparkles=[],floaters=[],far=[],mid=[],near=[];
const scoreEl=document.getElementById('score'), eggsEl=document.getElementById('eggs');
const AC=(window.AudioContext||window.webkitAudioContext)?new (window.AudioContext||window.webkitAudioContext)():null; let music={timer:null,delayChain:null};
function makeDelayChain(){ if(!AC) return null; const delay=AC.createDelay(0.8); delay.delayTime.value=0.35; const fb=AC.createGain(); fb.gain.value=0.35; const lp=AC.createBiquadFilter(); lp.type='lowpass'; lp.frequency.value=2200; delay.connect(fb).connect(lp).connect(delay); const g=AC.createGain(); g.gain.value=.08; return {input:g,out:delay}; }
function chord(freq,seconds=2.1,detune=5){ const osc1=AC.createOscillator(),osc2=AC.createOscillator(),pad=AC.createOscillator(); osc1.type='sine';osc2.type='triangle';pad.type='sine'; osc1.frequency.value=freq; osc2.frequency.value=freq*(2**(7/12)); pad.frequency.value=freq/2; osc2.detune.value=detune; pad.detune.value=-detune; const g=AC.createGain(); g.gain.setValueAtTime(0,AC.currentTime); g.gain.linearRampToValueAtTime(.06,AC.currentTime+.25); g.gain.exponentialRampToValueAtTime(.001,AC.currentTime+seconds); osc1.connect(g);osc2.connect(g);pad.connect(g); const d=music.delayChain||(music.delayChain=makeDelayChain()); g.connect(d.input); d.out.connect(AC.destination); osc1.start();osc2.start();pad.start(); osc1.stop(AC.currentTime+seconds);osc2.stop(AC.currentTime+seconds);pad.stop(AC.currentTime+seconds); }
function playTheme(theme){ if(!AC) return; stopMusic(); music.delayChain=makeDelayChain(); const base=392; let idx=0; const scales=({harpCloud:[0,2,4,7,9],crystalSky:[0,2,3,7,9],angelRise:[0,4,5,7,11],heavenFlight:[0,2,6,7,9],finalGlow:[0,2,5,7,9]})[theme]||[0,2,4,7,9]; music.timer=setInterval(()=>{ const sem=scales[idx%scales.length]; const f=base*Math.pow(2,sem/12); chord(f,2.3,6); if(idx%4===0){ const bell=AC.createOscillator(), g=AC.createGain(); bell.type='sine'; bell.frequency.value=f*2; g.gain.setValueAtTime(.04,AC.currentTime); g.gain.exponentialRampToValueAtTime(.0008,AC.currentTime+0.5); bell.connect(g).connect(AC.destination); bell.start(); bell.stop(AC.currentTime+0.55);} idx++; },1200); }
function stopMusic(){ if(music.timer){clearInterval(music.timer); music.timer=null;} }
function sfxWing(){ if(!AC) return; const o=AC.createOscillator(), g=AC.createGain(); o.type='sine'; o.frequency.value=680; g.gain.value=.03; o.connect(g).connect(AC.destination); o.start(); o.stop(AC.currentTime+0.06); }
function sfxEgg(){ if(!AC) return; const o=AC.createOscillator(), g=AC.createGain(); o.type='sine'; o.frequency.value=1100; g.gain.value=.035; o.connect(g).connect(AC.destination); o.start(); o.stop(AC.currentTime+0.09); }
for(let i=0;i<24;i++) far.push({x:Math.random()*cv.width,y:Math.random()*200+40,s:.5+Math.random()*0.6});
for(let i=0;i<14;i++) mid.push({x:Math.random()*cv.width,y:Math.random()*260+160,s:.8+Math.random()*0.7});
for(let i=0;i<9;i++) near.push({x:Math.random()*cv.width,y:Math.random()*120+420,s:1.2+Math.random()*0.8});
const intro=document.getElementById('intro'),menu=document.getElementById('menu'),over=document.getElementById('over');
setTimeout(()=>{intro.classList.add('hidden');menu.classList.remove('hidden');game.state='menu';},1200);
function pick(id){CFG={...LEVELS[id]};game.level=id;start();}
function start(){menu.classList.add('hidden');document.getElementById('hudL').classList.remove('hidden');document.getElementById('hudR').classList.remove('hidden');reset();game.state='play'; if(AC && AC.state==='suspended') AC.resume(); playTheme(CFG.theme);loop();}
function back(){document.getElementById('hudL').classList.add('hidden');document.getElementById('hudR').classList.add('hidden');over.classList.add('hidden');stopMusic();menu.classList.remove('hidden');game.state='menu';}
function restart(){over.classList.add('hidden');reset();game.state='play';playTheme(CFG.theme);loop();}
function reset(){game.score=0;game.eggs=0;game.frame=0;bird.y=300;bird.vy=0;bird.rot=0;pipes.length=0;eggs.length=0;sparkles.length=0;floaters.length=0;scoreEl.textContent=0;eggsEl.textContent=0;}
function flap(){if(game.state==='play'){bird.vy=-8.1;bird.rot=-0.35;sfxWing();}}
cv.addEventListener('click',flap);cv.addEventListener('touchstart',e=>{e.preventDefault();flap();});document.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();flap();}});
function spawnPipe(){const gap=CFG.gap,minY=100,maxY=cv.height-gap-110;const y=Math.random()*(maxY-minY)+minY;pipes.push({x:cv.width,y,gap,w:64,scored:false});}
function spawnEgg(){const r=15,minY=60,maxY=cv.height-60-r*2;const y=Math.random()*(maxY-minY)+minY;eggs.push({x:cv.width,y,r,t:0,got:false});for(let i=0;i<12;i++){sparkles.push({x:cv.width,y,t:0,a:1,ang:Math.random()*Math.PI*2,v:Math.random()*0.9+0.4});}}
function update(){game.frame++;if(game.level==='progress'&&game.score>0&&game.score%25===0&&game.step!==game.score){game.step=game.score;CFG.speed=Math.min(CFG.speed+0.16,5.2);CFG.gap=Math.max(CFG.gap-6,110);}for(const p of far){p.x-=CFG.speed*0.18*p.s;if(p.x<-120)p.x=cv.width+100;}for(const p of mid){p.x-=CFG.speed*0.32*p.s;if(p.x<-140)p.x=cv.width+120;}for(const p of near){p.x-=CFG.speed*0.55*p.s;if(p.x<-160)p.x=cv.width+140;}bird.vy+=CFG.gravity;bird.y+=bird.vy;bird.rot=bird.rot*0.9+Math.min(Math.max(bird.vy*0.02,-0.4),0.6)*0.35;if(bird.y>cv.height-52||bird.y<0){gameOver();return;}if(game.frame%CFG.pipeEvery===0)spawnPipe();if(game.frame%CFG.eggEvery===0)spawnEgg();for(const p of pipes){p.x-=CFG.speed;if(!p.scored&&p.x+p.w<bird.x){p.scored=true;game.score++;scoreEl.textContent=game.score;}const bx=bird.x,by=bird.y,s=bird.size;if(bx+s>p.x&&bx<p.x+p.w){if(by<p.y||by+s>p.y+p.gap){gameOver();return;}}}pipes=pipes.filter(p=>p.x>-100);for(const e of eggs){e.x-=CFG.speed;e.t+=0.1;const dx=(bird.x+bird.size*0.6)-e.x,dy=(bird.y+bird.size*0.6)-e.y;if(!e.got&&Math.hypot(dx,dy)<bird.size*0.55+e.r){e.got=true;game.eggs++;game.score+=5;scoreEl.textContent=game.score;eggsEl.textContent=game.eggs;floaters.push({x:e.x,y:e.y-12,text:'+5',a:1,vy:-0.6});sfxEgg();}}eggs=eggs.filter(e=>e.x+e.r>0&&!e.got);for(const s of sparkles){s.x+=Math.cos(s.ang)*s.v-CFG.speed;s.y+=Math.sin(s.ang)*s.v*0.4;s.a-=0.01;}sparkles=sparkles.filter(s=>s.a>0);for(const f of floaters){f.y+=f.vy;f.a-=0.02;}floaters=floaters.filter(f=>f.a>0);}
function gameOver(){game.state='over';stopMusic();if(game.score>game.best){game.best=game.score;localStorage.setItem('fw_best',String(game.best));}document.getElementById('final').textContent='Score: '+game.score;document.getElementById('eggSummary').textContent='Eier: '+game.eggs;document.getElementById('best').textContent='Bester Score: '+game.best;document.getElementById('hudL').classList.add('hidden');document.getElementById('hudR').classList.add('hidden');over.classList.remove('hidden');}
const birdImg=new Image();birdImg.src='./bird_sprite.png';
function mountain(x,y,s,t){ctx.save();ctx.translate(x,y);ctx.scale(s,s);const g=ctx.createLinearGradient(0,0,0,120);g.addColorStop(0,t);g.addColorStop(1,'#0b1f35');ctx.fillStyle=g;ctx.beginPath();ctx.moveTo(-60,120);ctx.lineTo(0,0);ctx.lineTo(60,120);ctx.closePath();ctx.fill();ctx.restore();}
function cloud(x,y,s){ctx.save();ctx.translate(x,y);ctx.scale(s,s);ctx.fillStyle='rgba(255,255,255,.93)';ctx.beginPath();ctx.arc(0,0,22,0,Math.PI*2);ctx.arc(20,-8,18,0,Math.PI*2);ctx.arc(38,0,26,0,Math.PI*2);ctx.arc(20,10,20,0,Math.PI*2);ctx.fill();ctx.restore();}
function pipe3D(x,y,w,gap){ctx.fillStyle='#7ee3b8';ctx.fillRect(x,0,w,y);ctx.fillRect(x,y+gap,w,cv.height-(y+gap));const grad=ctx.createLinearGradient(x,0,x+w,0);grad.addColorStop(0,'rgba(255,255,255,.25)');grad.addColorStop(0.5,'rgba(255,255,255,0)');grad.addColorStop(1,'rgba(0,0,0,.25)');ctx.fillStyle=grad;ctx.fillRect(x,0,w,y);ctx.fillRect(x,y+gap,w,cv.height-(y+gap));ctx.fillStyle='#2fb98d';ctx.fillRect(x-2,y-10,w+4,10);ctx.fillRect(x-2,y+gap,w+4,10);}
function draw(){let sky=ctx.createLinearGradient(0,0,0,cv.height);sky.addColorStop(0,'#0b1730');sky.addColorStop(0.7,'#123267');sky.addColorStop(1,'#2b69a5');ctx.fillStyle=sky;ctx.fillRect(0,0,cv.width,cv.height);for(const p of far)mountain(p.x,p.y,p.s,'#143e6a');for(const p of mid)cloud(p.x,p.y,p.s*1.1);for(const p of near)mountain(p.x,p.y,p.s*0.9,'#0f2d4c');let g=ctx.createLinearGradient(0,cv.height-70,0,cv.height);g.addColorStop(0,'#1c7a46');g.addColorStop(1,'#0e4b28');ctx.fillStyle=g;ctx.fillRect(0,cv.height-60,cv.width,60);for(const p of pipes)pipe3D(p.x,p.y,p.w,p.gap);for(const e of eggs){ctx.save();ctx.shadowColor='rgba(255,215,0,.6)';ctx.shadowBlur=16;ctx.fillStyle='#FFD700';ctx.beginPath();ctx.ellipse(e.x,e.y,e.r,e.r*1.3,0,0,Math.PI*2);ctx.fill();ctx.shadowBlur=0;ctx.fillStyle='#FFE57F';ctx.beginPath();ctx.ellipse(e.x-e.r*0.1,e.y-e.r*0.35,e.r*0.7,e.r*0.32,0,0,Math.PI*2);ctx.fill();ctx.restore();}for(const s of sparkles){ctx.globalAlpha=s.a;ctx.fillStyle='#FFF8B0';ctx.beginPath();ctx.arc(s.x,s.y,1.6,0,Math.PI*2);ctx.fill();ctx.globalAlpha=1;}if(birdImg.complete){const h=birdImg.height,w=birdImg.width,scale=(bird.size*2)/h,dw=w*scale,dh=h*scale;const cx=bird.x+bird.size/2,cy=bird.y+bird.size/2;ctx.save();ctx.translate(cx,cy);ctx.rotate(bird.rot);ctx.drawImage(birdImg,-dw/2,-dh/2,dw,dh);ctx.restore();}for(const f of floaters){ctx.globalAlpha=f.a;ctx.font='bold 20px system-ui,Arial';ctx.fillStyle='#ffcf66';ctx.fillText(f.text,f.x-10,f.y);ctx.globalAlpha=1;}}
function loop(){if(game.state!=='play')return;update();draw();requestAnimationFrame(loop);}
</script></body></html>